tags:
  - name: x86-64-systemv-abi
    implies: [x86-64]
    variables:
      ABI_NAME: SystemV_x86_64
      CFLAGS:
        - -DABI_SystemV_x86_64

  - name: x86-64-microsoft-abi
    implies: [x86-64]
    variables:
      ABI_NAME: Microsoft_x86_64
      CFLAGS:
        - -DABI_Microsoft_x86_64
      GCC_CFLAGS:
        - -maccumulate-outgoing-args

  - name: i386-systemv-abi
    implies: [i386]
    variables:
      ABI_NAME: SystemV_x86
      CFLAGS:
        - -DABI_SystemV_x86

  - name: i386-regparm-3-systemv-abi
    implies: [i386]
    variables:
      ABI_NAME: SystemV_x86_regparm_3
      CFLAGS:
        - -DABI_SystemV_x86_regparm_3

  - name: i386-regparm-2-systemv-abi
    implies: [i386]
    variables:
      ABI_NAME: SystemV_x86_regparm_2
      CFLAGS:
        - -DABI_SystemV_x86_regparm_2

  - name: i386-regparm-1-systemv-abi
    implies: [i386]
    variables:
      ABI_NAME: SystemV_x86_regparm_1
      CFLAGS:
        - -DABI_SystemV_x86_regparm_1

  - name: i386-cdecl-microsoft-abi
    implies: [i386]
    variables:
      ABI_NAME: Microsoft_x86_cdecl
      CFLAGS:
        - -DABI_Microsoft_x86_cdecl

  - name: i386-fastcall-microsoft-abi
    implies: [i386, has-special-linkage-requirements]
    variables:
      ABI_NAME: Microsoft_x86_fastcall
      CFLAGS:
        - -DABI_Microsoft_x86_fastcall

  - name: i386-stdcall-microsoft-abi
    implies: [i386, has-special-linkage-requirements]
    variables:
      ABI_NAME: Microsoft_x86_stdcall
      CFLAGS:
        - -DABI_Microsoft_x86_stdcall

  - name: aarch64-aapcs64-abi
    implies: [aarch64]
    variables:
      ABI_NAME: AAPCS64
      CFLAGS:
        - -DABI_AAPCS64

  - name: arm-aapcs-abi
    implies: [arm]
    variables:
      ABI_NAME: AAPCS
      CFLAGS:
        - -DABI_AAPCS

sources:
  - tags: [abi-test-function-description]
    repeat-for:
      - [linux, static, x86-64-systemv-abi]
      - [linux, static, i386-systemv-abi]
      - [linux, static, i386-regparm-3-systemv-abi]
      - [linux, static, i386-regparm-2-systemv-abi]
      - [linux, static, i386-regparm-1-systemv-abi]
      - [linux, static, i386-cdecl-microsoft-abi]
      - [linux, static, i386-fastcall-microsoft-abi]
      - [linux, static, i386-stdcall-microsoft-abi]
      #- [linux, static, aarch64-aapcs64-abi]
      - [linux, static, arm-aapcs-abi]
      - [windows, x86-64-microsoft-abi]
      - [windows, i386-cdecl-microsoft-abi]
      - [windows, i386-fastcall-microsoft-abi]
      - [windows, i386-stdcall-microsoft-abi]
    members:
      - share/revng/test/tests/abi/setup.c

  - tags: [abi-assembly-description, linux, static]
    repeat-for:
      - [x86-64-systemv-abi]
      - [i386-systemv-abi]
      - [i386-regparm-3-systemv-abi]
      - [i386-regparm-2-systemv-abi]
      - [i386-regparm-1-systemv-abi]
      - [i386-cdecl-microsoft-abi]
      - [i386-fastcall-microsoft-abi]
      - [i386-stdcall-microsoft-abi]
      #- [aarch64-aapcs64-abi]
      - [arm-aapcs-abi]
      - [has-special-combination-requirements, x86-64-microsoft-abi]
      - [has-special-combination-requirements, i386-cdecl-microsoft-abi]
      - [has-special-combination-requirements, i386-fastcall-microsoft-abi]
      - [has-special-combination-requirements, i386-stdcall-microsoft-abi]
    members:
      - share/revng/test/tests/abi/gcc_setup.S

  - tags: [abi-assembly-description, windows]
    repeat-for:
      - [x86-64-microsoft-abi]
      - [i386-cdecl-microsoft-abi]
      - [i386-fastcall-microsoft-abi]
      - [i386-stdcall-microsoft-abi]
    members:
      - share/revng/test/tests/abi/msvc_setup.S

  - tags: [abi-test-function-printers]
    repeat-for:
      - [for-runtime, linux, static, x86-64-systemv-abi]
      - [for-runtime, linux, static, i386-systemv-abi]
      - [for-runtime, linux, static, i386-regparm-3-systemv-abi]
      - [for-runtime, linux, static, i386-regparm-2-systemv-abi]
      - [for-runtime, linux, static, i386-regparm-1-systemv-abi]
      - [for-runtime, linux, static, i386-cdecl-microsoft-abi]
      - [for-runtime, linux, static, i386-fastcall-microsoft-abi]
      - [for-runtime, linux, static, i386-stdcall-microsoft-abi]
      #- [for-runtime, linux, static, aarch64-aapcs64-abi]
      - [for-runtime, linux, static, arm-aapcs-abi]
      - [for-runtime, has-special-combination-requirements, linux, static, x86-64-microsoft-abi]
      - [for-runtime, has-special-combination-requirements, linux, static, i386-cdecl-microsoft-abi]
      - [for-runtime, has-special-combination-requirements, linux, static, i386-fastcall-microsoft-abi]
      - [for-runtime, has-special-combination-requirements, linux, static, i386-stdcall-microsoft-abi]
      - [windows, x86-64-microsoft-abi]
      - [windows, i386-cdecl-microsoft-abi]
    members:
      - share/revng/test/tests/abi/printers.c

  - tags: [abi-test-function-prototypes]
    repeat-for:
      - [linux, x86-64-systemv-abi]
      - [linux, i386-systemv-abi]
      - [linux, i386-regparm-3-systemv-abi]
      - [linux, i386-regparm-2-systemv-abi]
      - [linux, i386-regparm-1-systemv-abi]
      - [linux, i386-cdecl-microsoft-abi]
      - [linux, i386-fastcall-microsoft-abi]
      - [linux, i386-stdcall-microsoft-abi]
      #- [linux, aarch64-aapcs64-abi]
      - [linux, arm-aapcs-abi]
      - [windows, x86-64-microsoft-abi]
      - [windows, i386-cdecl-microsoft-abi]
      - [windows, i386-fastcall-microsoft-abi]
      - [windows, i386-stdcall-microsoft-abi]
    members:
      - share/revng/test/tests/abi/functions.c
